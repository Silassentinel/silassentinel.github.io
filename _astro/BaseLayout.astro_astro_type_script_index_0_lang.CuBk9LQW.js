const u=(i,t,e)=>{if(!(!i||!i.classList))try{e?i.classList.add(t):i.classList.remove(t)}catch(o){console.error(`Error ${e?"adding":"removing"} class "${t}":`,o)}},p=(i,t,e,o)=>Math.sqrt(Math.pow(e-i,2)+Math.pow(o-t,2)),M=i=>{const t=i.getBoundingClientRect();return!(t.top>window.innerHeight||t.bottom<0)},g=()=>{const i=document.documentElement;if(i)try{i.classList.toggle("dark");const t=i.classList.contains("dark");localStorage.setItem("theme",t?"dark":"light")}catch(t){console.error("Error toggling theme:",t)}},b=(i,t,e)=>{try{const o=document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, span, li"),s=[];return o.forEach(n=>{const a=n.getBoundingClientRect(),r=a.left+a.width/2,l=a.top+a.height/2;p(i,t,r,l)<e&&(n.id?s.push(`#${n.id}`):n.classList.length>0?s.push(`.${Array.from(n.classList).join(".")}`):s.push(n.tagName.toLowerCase()))}),s}catch(o){return console.error("Error finding elements near position:",o),[]}};class c{static methods={reverse:t=>t.split("").reverse().join(""),leetspeak:t=>{const e={a:"4",e:"3",i:"1",o:"0",s:"5",t:"7",b:"8",l:"1",A:"4",E:"3",I:"1",O:"0",S:"5",T:"7",B:"8",L:"1"};return t.split("").map(o=>e[o]||o).join("")},scramble:t=>t.split(" ").map(e=>{if(e.length<=3)return e;const o=e[0],s=e[e.length-1],n=e.substring(1,e.length-1).split("");for(let a=n.length-1;a>0;a--){const r=Math.floor(Math.random()*(a+1));[n[a],n[r]]=[n[r],n[a]]}return o+n.join("")+s}).join(" "),randomCapitalize:t=>t.split("").map(e=>Math.random()>.5?e.toUpperCase():e.toLowerCase()).join(""),zalgo:(t,e=1)=>{const o=["̀","́","̂","̃","̄","̅","̆","̇","̈","̉","̊","̋","̌","̍","̎","̏","̐","̑","̒","̓","̔","̕","̚","̛","̽","̾","̿","̀","́","͂","̓","̈́","͆","͊","͋","͌","͐","͑","͒","͗","͘","͛","͝","͞","͠","͡","͢","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ"];return t.split("").map(s=>{let n=s;const a=Math.floor(Math.random()*(5*e));for(let r=0;r<a;r++){const l=o[Math.floor(Math.random()*o.length)];n+=l}return n}).join("")}};static getRandomMethod(){const t=Object.keys(this.methods);return t[Math.floor(Math.random()*t.length)]}static obfuscate(t,e){if(!t)return t;const o=e?.method||this.getRandomMethod(),s=e?.intensity||1;return o==="zalgo"?this.methods.zalgo(t,s):this.methods[o]?.(t)||t}static obfuscateElements(t,e={onlyVisible:!0}){try{const o=document.querySelectorAll(t);if(!o||o.length===0)return;o.forEach(s=>{e.onlyVisible&&!M(s)||s instanceof HTMLElement&&(!s.dataset.originalText&&s.textContent&&(s.dataset.originalText=s.textContent),s.textContent&&s.dataset.originalText&&(s.textContent=this.obfuscate(s.dataset.originalText,e)))})}catch(o){console.error(`Error obfuscating elements with selector "${t}":`,o)}}static restoreElements(t){try{const e=document.querySelectorAll(t);if(!e||e.length===0)return;e.forEach(o=>{o instanceof HTMLElement&&o.dataset.originalText&&(o.textContent=o.dataset.originalText)})}catch(e){console.error(`Error restoring elements with selector "${t}":`,e)}}static cyclicObfuscation(t,e={}){const o=Object.keys(this.methods);let s=0,n=Date.now(),a=null;const r=e.interval||2e3,l=e.duration||0,d=()=>{const f=o[s];this.obfuscateElements(t,{...e,method:f}),s=(s+1)%o.length,l===0||Date.now()-n<l?a=window.setTimeout(d,r):this.restoreElements(t)};return d(),()=>{a!==null&&(window.clearTimeout(a),this.restoreElements(t))}}static initWithChaosMode(){typeof window>"u"||document.addEventListener("DOMContentLoaded",()=>{setInterval(()=>{try{if(parseInt(localStorage.getItem("chaosClickCount")||"0")>=25&&Math.random()<.3){const o="p, h1, h2, h3, h4, h5, h6",s=this.getRandomMethod();this.obfuscateElements(o,{method:s}),setTimeout(()=>{this.restoreElements(o)},2e3)}}catch(e){console.error("Error checking chaos state:",e)}},5e3),document.addEventListener("click",()=>{try{if(parseInt(localStorage.getItem("chaosClickCount")||"0")>=25&&Math.random()<.5){const o="p, h1, h2, h3, h4, h5, h6";this.obfuscateElements(o,{method:"zalgo"}),setTimeout(()=>{this.restoreElements(o)},1500)}}catch(e){console.error("Error in click handler for obfuscation:",e)}})})}}c.getRandomMethod.bind(c);c.obfuscate.bind(c);const y=c.obfuscateElements.bind(c),T=c.restoreElements.bind(c);c.cyclicObfuscation.bind(c);const S=()=>{typeof window>"u"||c.initWithChaosMode()};typeof window<"u"&&S();const h={chaosThreshold:5,ultraChaosThreshold:25,effectRadius:300,obfuscationDelay:1e3};function k(){const i=typeof window<"u"?parseInt(localStorage.getItem("chaosClickCount")||"0",10):0;return{clickCount:i,chaosMode:i>=h.chaosThreshold,ultraChaosMode:i>=h.ultraChaosThreshold,mouseX:0,mouseY:0,rotation:0,hueRotation:0,lastObfuscationTime:0}}const C={TEXT_ELEMENTS:"p, h1, h2, h3, h4, h5, h6, span, a, li, blockquote",BRUTALIST_ELEMENTS:".brutalist-card, blockquote, .brutalist-intro, .brutalist-grid, .brutalist-section-title",HEADING_ELEMENTS:"p, h1, h2, h3, h4, h5, h6",INTERACTIVE_ELEMENTS:"a, button"};class L{state;constructor(){this.state=k()}initialize(){typeof window>"u"||(document.addEventListener("click",this.handleGlobalClick.bind(this)),document.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.state.ultraChaosMode?this.applyUltraChaosMode():this.state.chaosMode&&this.applyChaosMode())}applyChaosMode(){document.body&&(u(document.body,"chaos-mode",!0),this.updateChaosFontSizes())}applyUltraChaosMode(){document.body&&(u(document.body,"chaos-mode",!0),u(document.body,"ultra-chaos-mode",!0),this.startUltraChaosAnimation(),this.updateChaosFontSizes())}saveClickCount(){try{localStorage.setItem("chaosClickCount",this.state.clickCount.toString())}catch(t){console.error("Error storing chaosClickCount in localStorage:",t)}}handleGlobalClick=t=>{const e=t.target,o=e.tagName==="A"||e.tagName==="BUTTON"||!!e.closest("a")||!!e.closest("button");this.state.clickCount++,this.saveClickCount(),this.state.clickCount>=h.chaosThreshold&&!this.state.chaosMode&&(this.state.chaosMode=!0,this.applyChaosMode()),this.state.chaosMode&&(g(),this.updateChaosFontSizes()),this.state.clickCount>=h.ultraChaosThreshold&&!this.state.ultraChaosMode&&(this.state.ultraChaosMode=!0,this.applyUltraChaosMode(),this.addBrutalistGlitchText()),this.state.ultraChaosMode&&!o&&this.applyObfuscationEffect()};applyObfuscationEffect(){const t=Date.now();if(t-this.state.lastObfuscationTime>h.obfuscationDelay){this.state.lastObfuscationTime=t;const e=b(this.state.mouseX,this.state.mouseY,h.effectRadius);if(e.length>0){const o=e.join(", ");y(o),setTimeout(()=>{T(o)},1500)}}}handleMouseMove=t=>{this.state.chaosMode&&(this.state.mouseX=t.clientX,this.state.mouseY=t.clientY,requestAnimationFrame(()=>this.updateChaosFontSizes()))};updateChaosFontSizes=()=>{if(this.state.chaosMode)try{const t=document.querySelectorAll(C.TEXT_ELEMENTS);if(!t||t.length===0)return;t.forEach(e=>{if(!(e instanceof HTMLElement))return;const o=e.getBoundingClientRect(),s=o.left+o.width/2,n=o.top+o.height/2,a=p(this.state.mouseX,this.state.mouseY,s,n),r=200;if(a<r){const l=a/r,d=50-l*45;if(e.style.fontSize=`${d}px`,this.state.ultraChaosMode){const f=(1-l)*45;e.style.transform=`rotate(${f}deg)`}}else e.style.fontSize="5px",this.state.ultraChaosMode&&(e.style.transform="rotate(0deg)")})}catch(t){console.error("Error updating font sizes:",t)}};startUltraChaosAnimation=()=>{if(!this.state.ultraChaosMode)return;const t=()=>{if(this.state.ultraChaosMode)try{this.state.rotation=(this.state.rotation+.5)%360,this.state.hueRotation=(this.state.hueRotation+2)%360,document.body&&(document.body.style.transform=`skew(${Math.sin(this.state.rotation*Math.PI/180)*5}deg)`),document.documentElement&&(document.documentElement.style.filter=`hue-rotate(${this.state.hueRotation}deg)`),document.querySelectorAll(C.BRUTALIST_ELEMENTS).forEach(o=>{if(o instanceof HTMLElement&&Math.random()<.05){const s=Math.floor(Math.random()*15)+2;o.style.borderWidth=`${s}px`}}),requestAnimationFrame(t)}catch(e){console.error("Error in ultra chaos animation:",e)}};t()};addBrutalistGlitchText=()=>{if(!(!this.state.ultraChaosMode||!document.body))try{if(document.querySelector(".brutalist-overlay"))return;const t=document.createElement("div");t.className="brutalist-overlay";const e=["Your pc has been hacked","YOU ARE IN CHAOS MODE","GLITCH IN THE MATRIX","NO STYLE","SYSTEM FAILURE","CONTENT OVER FORM","EMBRACE CHAOS","FUNCTION > FORM"],o=document.createElement("div");o.className="brutalist-marquee",e.forEach(s=>{const n=document.createElement("span");n.textContent=s,n.className="glitch-text",o.appendChild(n);const a=document.createElement("span");a.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;",o.appendChild(a)}),t.appendChild(o),document.body.appendChild(t),setInterval(()=>{Math.random()<.1&&document.body&&(u(document.body,"glitch-effect",!0),setTimeout(()=>u(document.body,"glitch-effect",!1),100))},1e3)}catch(t){console.error("Error adding brutalist glitch text:",t)}}}let E=null;const m=()=>{typeof window>"u"||(E||(E=new L),E.initialize())};typeof window<"u"&&(document.addEventListener("DOMContentLoaded",m),(document.readyState==="complete"||document.readyState==="interactive")&&m());typeof window<"u"&&(document.readyState==="complete"||document.readyState==="interactive"?m():document.addEventListener("DOMContentLoaded",m));
